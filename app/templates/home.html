<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Home</title>
    <script>
      function deleteProject(projectId) {
        fetch(`/delete_project/${projectId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              // Remove the image from the gallery
              document.getElementById(`project-${projectId}`).remove();
            } else {
              alert(data.message);
            }
          });
      }
    </script>
  </head>
  <body>
    <h1>Welcome, {{ current_user.username }}!</h1>
    <h2>List Projects</h2>

    <ul>
      {% for project in projects %}
      <li>
        <div id="project-{{ project }}">
          <a href="{{ url_for('main.mosaify_previous', project_id=project) }}"
            >Project {{project}}</a
          >
          <button onclick="deleteProject({{ project }})">Delete</button>
        </div>
      </li>
      {% endfor %}
    </ul>
    <br />
    <br />
    <br />
    <a href="{{ url_for('main.mosaify_new') }}">Create Project</a>
    <br />
    <br />
    <a href="{{ url_for('main.logout') }}">Logout</a>
  </body>
</html>
