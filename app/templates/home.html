<!-- /*
* Template Name: Snap
* Template Author: Untree.co
* Tempalte URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!DOCTYPE html>
<html lang="en">
  <head>
    {% include 'pre.html' %}
    <script>
      function deleteProject(projectId) {
        fetch(`/delete_project/${projectId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              // Remove the image from the gallery
              document.getElementById(`project-${projectId}`).remove();
              location.reload();
            } else {
              alert(data.message);
            }
          });
      }
    </script>
  </head>
  <body>
    <main>
      <section class="site-section" id="section-blog">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-md-8">
              <div class="row">
                <h2 class="heading" data-aos="fade-up">Projects</h2>
                <div class="col-md-12 mb-4" data-aos="fade-up">
                  <div class="d-md-flex d-block blog-entry align-items-start">
                    <div class="row form-group">
                      <div class="col-md-12">
                        <a
                          href="{{ url_for('main.mosaify_new') }}"
                          class="btn btn-primary btn-md"
                          >Create Project</a
                        >
                        <!-- <input
                          onclick="{{ url_for('main.mosaify_new') }}"
                          type="button"
                          value="Create Project"
                          class="btn btn-primary btn-md"
                        /> -->
                      </div>
                    </div>
                    <!-- <button onclick="{{ url_for('main.mosaify_new') }}">
                      Create Project
                    </button> -->
                    <!-- <div class="mr-0 mr-md-5 mb-3 img-wrap">
                      <a href="#"
                        ><img
                          src="images/img_1.jpg"
                          alt="Image"
                          class="img-fluid mb-0"
                      /></a>
                    </div> -->
                    <!-- <div>
                      <h2 class="mt-0 mb-2">
                        <a href="#"
                          >Lorem ipsum dolor sit amet consectetur adipisicing
                          elit</a
                        >
                      </h2>
                      <div class="meta mb-3">
                        Posted by Ben Jones on <a href="#">Jan 18, 2019</a>
                      </div>
                      <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing
                        elit. Officiis aliquid doloremque qui, saepe alias eum?
                      </p>
                    </div> -->
                  </div>
                </div>

                {% if projects|length > 0 %} {% for project in projects %}
                <div
                  id="project-{{ project.id }}"
                  class="col-md-12 mb-4"
                  data-aos="fade-up"
                >
                  <div class="d-md-flex d-block blog-entry align-items-start">
                    <div class="mr-0 mr-md-5 mb-3 img-wrap">
                      <a
                        href="{{ url_for('main.mosaify_previous', project_id=project.id) }}"
                        ><img
                          src="{{ url_for('static', filename='images/project.jpeg') }}"
                          alt="Image"
                          class="img-fluid mb-0"
                      /></a>
                    </div>
                    <div>
                      <h2 class="mt-0 mb-2">
                        <a
                          href="{{ url_for('main.mosaify_previous', project_id=project.id) }}"
                          >project-{{ project.id }}</a
                        >
                      </h2>
                      <!-- <div class="meta mb-3">
                        Created by {{ current_user.username }} on
                        <a href="#">Jan 18, 2019</a>
                      </div> -->
                      <div class="meta mb-3">
                        Created by {{ current_user.username }}
                      </div>
                      <button
                        class="btn btn-primary btn-md"
                        onclick="deleteProject({{ project.id }})"
                      >
                        Delete
                      </button>
                      <!-- <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing
                        elit. Officiis aliquid doloremque qui, saepe alias eum?
                      </p> -->
                      <p>{{ project.name }}</p>
                    </div>
                  </div>
                </div>
                {% endfor %} {% else %}
                <div class="col-md-12 mb-4" data-aos="fade-up">
                  <div class="d-md-flex d-block blog-entry align-items-start">
                    <p>No projects available.</p>
                  </div>
                </div>
                {% endif %}

                <!-- 
                NOTICE: Example Item card
                <div class="col-md-12 mb-4" data-aos="fade-up">
                  <div class="d-md-flex d-block blog-entry align-items-start">
                    <div class="mr-0 mr-md-5 mb-3 img-wrap">
                      <a href="#"
                        ><img
                          src="images/img_4.jpg"
                          alt="Image"
                          class="img-fluid mb-0"
                      /></a>
                    </div>
                    <div>
                      <h2 class="mt-0 mb-2">
                        <a href="#"
                          >Lorem ipsum dolor sit amet consectetur adipisicing
                          elit</a
                        >
                      </h2>
                      <div class="meta mb-3">
                        Posted by Ben Jones on <a href="#">Jan 18, 2019</a>
                      </div>
                      <p>
                        Lorem ipsum dolor sit amet, consectetur adipisicing
                        elit. Officiis aliquid doloremque qui, saepe alias eum?
                      </p>
                    </div>
                  </div>
                </div> 
                -->

                <!-- 
                NOTICE: Use for pagination.
                <div class="col-12 text-center">
                  <div class="custom-pagination">
                    <span>1</span>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <span>...</span>
                    <a href="#">7</a>
                  </div>
                </div> 
                -->
              </div>
              <div class="col-12 text-center">
                <a
                  class="btn btn-primary btn-md"
                  href="{{ url_for('main.logout') }}"
                  >Logout</a
                >
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    {% include 'post.html' %}
  </body>
</html>
